'use strict';(function(){function H(a){return"object"==typeof a&&3===Q(a)&&!a.nodeType&&a.constructor===Object}function T(a){return!0===a||!1===a}function F(a){return"string"==typeof a||a===""+a}function aa(a,b,c,e){setTimeout(function(){a.apply(b,c||[])},e||0)}function R(){}function ba(a,b){var c,e;if(!a||!F(a))return null;try{e=new DOMParser,c=e.parseFromString(a,b||"text/xml")}catch(g){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c}function U(a){if(a&&
void 0!=!a.length&&a!==""+a){for(var b=[],c=-1,e=a.length>>>0;++c!==e;b[c]=a[c]);return b}return a?[a]:[]}function t(a,b){return a.getAttribute?a.getAttribute(b):null}function J(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function B(a){return"function"==typeof a}function D(a){if(!a)return!1;var b,c;return"object"!=(c=typeof a)&&"function"!=c?!1:B(b=a.then)?b:!1}function O(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)aa(function(){console.log(a);
b&&console.log(b)});else throw a;}function Y(a){if(null===a||"object"!=typeof a)return!1;a=Q(a);return 2<a||-1==a}var G=Array.prototype.slice,fa=Object.prototype.toString,Q=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[fa.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),p=function(){return function b(){var c=
!1,e=!1,g=G.call(arguments),l=g.shift(),h,k,r;T(g[g.length-1])&&(c=g.pop());T(g[g.length-1])&&(e=c,c=g.pop());for(;g.length;)if(h=g.shift())for(k in h)if(h.hasOwnProperty(k)&&void 0!==(r=h[k]))if(e)if(l[k]&&H(l[k])&&H(r))b(l[k],r,c,e);else{if(!0===c||void 0==l[k])H(r)?(l[k]={},b(l[k],r,c,!0)):l[k]=r}else if(!0===c||void 0==l[k])l[k]=r;return l}}(),m=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},ca=function(){return String.prototype.trim?
function(a){return F(a)?a.trim():a}:function(a){return F(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),ga=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),da=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,e=/(\([^)]*)\+/,g=/(\[[^\]]+)~/,l=/(~|>|\+)/,h=/ +/,k=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,r=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,
ha=/\D/,E=/[^(]*\(([^)]*)\)/,m=/\(.*/,ia=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,P=window.document,B=!!P.getElementsByClassName,V=!!P.querySelectorAll,v={"first-child":function(f){return f.parentNode.getElementsByTagName("*")[0]!==f},"last-child":function(f){for(;(f=f.nextSibling)&&1!=f.nodeType;);return!!f},root:function(f){return"html"!==f.nodeName.toLowerCase()},"nth-child":function(f,a){var d=f.nodeIndex||0,b=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,k=a[1];if(d)return!((d+b)%k);var r=f.parentNode.firstChild;
d++;do if(1==r.nodeType&&(r.nodeIndex=++d)&&f===r&&(d+b)%k)return 0;while(r=r.nextSibling);return 1},"nth-last-child":function(f,a){var d=f.nodeIndexLast||0,b=a[3]?("%"===a[2]?-1:1)*a[3]:0,k=a[1];if(d)return!((d+b)%k);var r=f.parentNode.lastChild;d++;do if(1==r.nodeType&&(r.nodeLastIndex=d++)&&f===r&&(d+b)%k)return 0;while(r=r.previousSibling);return 1},empty:function(f){return!!f.firstChild},parent:function(f){return!f.firstChild},"only-child":function(f){return 1!=f.parentNode.getElementsByTagName("*").length},
checked:function(f){return!f.checked},lang:function(f,a){return f.lang!==a&&P.documentElement.lang!==a},enabled:function(f){return f.disabled||"hidden"===f.type},disabled:function(f){return!f.disabled},selected:function(f){return!f.selected}},p={},F=function(f){return p[f]||(p[f]=new RegExp("(^| +)"+f+"($| +)"))},y={"":function(f,a){return null!==t(f,a)},"=":function(f,a,d){var b;return(b=t(f,a))&&b===d},"&=":function(f,a,d){var b;return(b=t(f,a))&&F(d).test(b)},"^=":function(f,a,b){var k;return(k=
t(f,a)+"")&&!k.indexOf(b)},"$=":function(f,a,b){var k;return(k=t(f,a)+"")&&k.indexOf(b)==k.length-b.length},"*=":function(f,a,b){var k;return(k=t(f,a)+"")&&-1!=k.indexOf(b)},"|=":function(f,a,b){var k;return(k=t(f,a)+"")&&(k===b||!!k.indexOf(b+"-"))},"!=":function(f,a,b){var k;return!(k=t(f,a))||!F(b).test(k)}},f=function(f,x){x=x||P;var d=[],u=null,w,C,p,n,t,z,A;if(V)try{d=U(x.querySelectorAll(f.replace(b,'="$1"')))}catch(F){u=!0}if(!V||u)if(a.test(f))switch(u=0,f.charAt(0)){case "#":u=f.slice(1);
d=P.getElementById(u);d.id!==u&&(d=P.all[u]);d=d?[d]:[];break;case ".":w=f.slice(1);if(B)d=U((d=x.getElementsByClassName(w)).length?d:[]);else{w=" "+w+" ";C=x.getElementsByTagName("*");for(p=0;n=C[p++];)-1!=(" "+n.className+" ").indexOf(w)&&(d[u++]=n);d=u?d:[]}break;case ":":C=x.getElementsByTagName("*");p=0;t=f.replace(E,"$1");for(z=f.replace(m,"");n=C[p++];)v[z]&&!v[z](n,t)&&(d[u++]=n);d=u?d:[];break;case "[":C=x.getElementsByTagName("*");p=0;n=ia.exec(f);w=n[1];A=n[2]||"";for(t=n[3];n=C[p++];)y[A]&&
(y[A](n,w,t)||"class"===w&&y[A](n,"className",t))&&(d[u++]=n);d=u?d:[];break;default:d=U((d=x.getElementsByTagName(f)).length?d:[])}else{for(var D=f.split(c),J=D.length-1,Q=!!J,O,G,s,H,K,L,M,N,R,q,W,X;u=D[J--];){G=(O=u.replace(e,"$1%").replace(g,"$1&").replace(l," $1 ").split(h)).length;p=0;H=" ";for(C=[x];s=O[p++];)if(" "!==s&&">"!==s&&"~"!==s&&"+"!==s&&C){s=s.match(k);K=s[1]||"*";L=s[2];M=s[3]?" "+s[3]+" ":"";w=s[4];A=s[5]||"";z=s[7];t="nth-child"===z||"nth-last-child"===z?r.exec("even"===s[8]&&
"2n"||"odd"===s[8]&&"2n%1"||!ha.test(s[8])&&"0n%"+s[8]||s[8]):s[8];N=[];u=R=0;for(W=p==G;q=C[R++];)switch(H){case " ":X=q.getElementsByTagName(K);for(q=0;n=X[q++];)L&&n.id!==L||M&&-1==(" "+n.className+" ").indexOf(M)||!(!w||y[A]&&(y[A](n,w,s[6])||"class"===w&&y[A](n,"className",s[6])))||n.yeasss||(v[z]?v[z](n,t):z)||(W&&(n.yeasss=1),N[u++]=n);break;case "~":for(K=K.toLowerCase();(q=q.nextSibling)&&!q.yeasss;)1!=q.nodeType||"*"!==K&&q.nodeName.toLowerCase()!==K||L&&q.id!==L||M&&-1==(" "+q.className+
" ").indexOf(M)||!(!w||y[A]&&(y[A](n,w,s[6])||"class"===w&&y[A](n,"className",s[6])))||q.yeasss||(v[z]?v[z](q,t):z)||(W&&(q.yeasss=1),N[u++]=q);break;case "+":for(;(q=q.nextSibling)&&1!=q.nodeType;);!q||q.nodeName.toLowerCase()!==K.toLowerCase()&&"*"!==K||L&&q.id!==L||M&&-1==(" "+n.className+" ").indexOf(M)||!(!w||y[A]&&(y[A](n,w,s[6])||"class"===w&&y[A](n,"className",s[6])))||q.yeasss||(v[z]?v[z](q,t):z)||(W&&(q.yeasss=1),N[u++]=q);break;case ">":for(X=q.getElementsByTagName(K),p=0;n=X[p++];)n.parentNode!==
q||L&&n.id!==L||M&&-1==(" "+n.className+" ").indexOf(M)||!(!w||y[A]&&(y[A](n,w,s[6])||"class"===w&&y[A](n,"className",s[6])))||n.yeasss||(v[z]?v[z](n,t):z)||(W&&(n.yeasss=1),N[u++]=n)}C=N}else H=s;if(Q){if(!C.concat){N=[];for(q=0;n=C[q];)N[q++]=n;C=N}d=C.concat(1==d.length?d[0]:d)}else d=C}for(u=d.length;u--;)d[u].yeasss=d[u].nodeIndex=d[u].nodeIndexLast=null}return d};f.is=function(a,b){var k=f(b,a.parentNode),r,c;r=-1;for(c=k.length;++r<c;)if(k[r]===a)return!0;return!1};return f}(),Z=function(){var a=
["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),ea=function(){this.events={}};p(ea.prototype,{createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new S(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,e){a=a.toLowerCase();var g=this.events;g[a]||(g[a]=
new S(a));return g[a].on(b,c,e)},once:function(a,b,c,e){e=e||{};e.limit=1;return this.on(a,b,c,e)},un:function(a,b,c){a=a.toLowerCase();var e=this.events;e[a]&&e[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var e=this.events;return e[a]?e[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,G.call(arguments,1))},
suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);
else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,e=-1,g=a.length;++e<g;c=a[e],b[c]=m(this[c],this));this.api=b}return this.api}},!0,!1);var S=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=Z();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===
b?null:b};p(S.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var e=this.uni,g=b||a;if(g[e]&&!c.allowDupes)return null;var l=++this.lid,h=c.first||!1;g[e]=l;a={fn:a,context:b,uniContext:g,id:l,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};h?this.listeners.unshift(a):this.listeners.push(a);this.map[l]=a;return l},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,
b,c)},un:function(a,b){var c=-1,e=this.uni,g=this.listeners,l;l=a==parseInt(a)?a:(b||a)[e];if(!l)return!1;for(var h=0,k=g.length;h<k;h++)if(g[h].id==l){c=h;delete g[h].uniContext[e];break}if(-1==c)return!1;g.splice(c,1);delete this.map[l];return!0},hasListener:function(a,b){var c=this.listeners,e;if(a){b=b||a;e=B(a)?b[this.uni]:a;if(!e)return!1;for(var g=0,l=c.length;g<l;g++)if(c[g].id==e)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,e;c=0;for(e=
a.length;c<e;c++)delete a[c].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=G.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b||"merge"==b?[]:null,e,g,a="first"==b?[a[0]]:G.call(a);e=a.shift();)if(e&&this.map[e.id]&&
(e.count++,!(e.count<e.start)))if(g=e.fn.apply(e.context,this._prepareArgs(e,arguments)),e.called++,e.called==e.limit&&this.un(e.id),"all"==b)c.push(g);else if("merge"==b&&g)c=c.concat(g);else{if("first"==b)return g;if("last"==b)c=g;else if(!1==b&&!1===g)return!1}if(b)return c}},!0,!1);var $=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},e=function(){b=!0;var k=a.shift();c(function(){k[0].apply(k[1],k[2]);a.length?e():b=!1},0)},g=function(k,r,
c){c=c||[];a.push([k,r,c]);b||e()},l=function(a,b){return function(c){try{b.resolve(a(c))}catch(e){b.reject(e)}}},h=function(a,b){if(a instanceof h)return a;if(!(this instanceof h))return new h(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=D(a))a instanceof h?a.then(m(this.resolve,this),m(this.reject,this)):(new h(c,a)).then(m(this.resolve,this),m(this.reject,this));else if(B(a))try{a.call(b,m(this.resolve,this),m(this.reject,this))}catch(e){this.reject(e)}else this.resolve(a)};
p(h.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=this._rejects=this._fulfills=null},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=D(a)){a instanceof
h?a.then(m(this._processResolveValue,this),m(this._processRejectReason,this)):(new h(c,a)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(e){0==this._state&&this._doReject(e);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)g(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)g(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new h,e=this._state;0==e||0!=this._wait?(a&&B(a)?this._fulfills.push([l(a,c),null]):this._fulfills.push([c.resolve,c]),b&&B(b)?this._rejects.push([l(b,c),null]):this._rejects.push([c.reject,c])):1==e?a&&B(a)?g(l(a,c),null,[this._value]):c.resolve(this._value):2==e&&(b&&B(b)?g(l(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(c){O(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(e){O(e)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){O(c)}},fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(e){O(e)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},
promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,this),always:m(this.always,this)}},after:function(a){var b=this;if(D(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};B(a.done)?a.done(c):a.then(c)}return b}},!0,!1);h.fcall=function(a,b,c){return h.resolve(a.apply(b,c||[]))};h.resolve=function(a){var b=new h;b.resolve(a);return b};h.reject=function(a){var b=new h;b.reject(a);return b};
h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,e=Array(c),g=c,l,m,p=function(a,c){e[c]=a;g--;0==g&&b.resolve(e)};for(l=0;l<c;l++)(function(c){m=a[l];m instanceof h?m.done(function(a){p(a,c)}).fail(b.reject,b):D(m)||B(m)?(new h(m)).done(function(a){p(a,c)}).fail(b.reject,b):p(m,c)})(l);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,e=[],g=c,l,m,p=function(a){e.push(a);t()},t=function(){g--;
0==g&&b.resolve(e)};for(l=0;l<c;l++)m=a[l],m instanceof h?m.done(p).fail(t):D(m)||B(m)?(new h(m)).done(p).fail(t):p(m);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,e,g;for(e=0;e<c&&(g=a[e],g instanceof h?g.done(b.resolve,b).fail(b.reject,b):D(g)||B(g)?(new h(g)).done(b.resolve,b).fail(b.reject,b):b.resolve(g),b.isPending());e++);return b};h.waterfall=function(a){if(!a.length)return h.resolve(null);for(var b=a.shift(),b=B(b)?h.fcall(b):h.resolve(c),c;c=a.shift();)D(c)?
b=b.then(function(a){return function(){return a}}(c)):B(c)?b=b.then(c):b.resolve(c);return b};h.counter=function(a){var b=new h;b.countdown=function(){a--;0==a&&b.resolve()};return b};return h}(),ja=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g=/^(?:GET|HEAD)$/i,l=function(a,b,c){var d,e;e=Q(a);if(3>e&&-1<e&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if("object"==typeof a&&5===Q(a)&&c)for(d=0,e=a.length;d<e;d++)l(a[d],
b,c+"["+d+"]");else if(Y(a))for(d in a)a.hasOwnProperty(d)&&l(a[d],b,c?c+"["+d+"]":d)},h=function(f,I){f.replace(a,"");if(!1===I.cache){var x=(new Date).getTime();return b.test(f)?f.replace(b,"$1_="+x):f+(c.test(f)?"&":"?")+"_="+x}!I.data||window.FormData&&I.data instanceof window.FormData||(F(I.data)?x=I.data:(x=[],l(I.data,x,null),x=x.join("&").replace(/%20/g,"+")),I.data=x,g.test(I.method)&&(f+=(c.test(f)?"&":"?")+I.data,I.data=null));return f},k={xml:"application/xml, text/xml",html:"text/html",
script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},r={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},D={},E=new ea,H=function(a){var b;
b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},G=function(a,b,c){var d,e;if(!Y(a)&&!B(a)&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);else if("object"==typeof a&&5===Q(a)&&c)for(d=0,e=a.length;d<e;d++)G(a[d],b,c+"["+d+"]");else if(Y(a))for(d in a)a.hasOwnProperty(d)&&G(a[d],b,c?c+"["+d+"]":d)},P=function(a){for(var b,
c,d="",e=0;e<a.elements.length;e++)if(b=a.elements[e],null!==t(b,"name"))if(c="INPUT"===b.nodeName.toUpperCase()?t(b,"type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},U=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!F(a))return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=
ba(ca(a)),b?da(b,a):a;if("html"===d)return a=ba(a,"text/html"),b?da(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return ga(ca(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&H(a);return a+""},V=function(a){var b=e.exec((window?window.location.href:"").toLowerCase())||[],c=e.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=
!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new $;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):P(a.form));a.url=h(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new y(a,b,this):new S(a,b,this):new T(a,b,this);
this._deferred=b;this._transport=c;b.done(function(a){E.trigger("success",a)});b.fail(function(a){E.trigger("error",a)});b.always(function(){E.trigger("end")});E.trigger("start");a.timeout&&(this._timeout=setTimeout(m(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===E.trigger("beforeSend",a,c)&&(this._promise=$.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=$.reject());this._promise||(aa(c.send,c),b.abort=m(this.abort,this),b.always(this.destroy,
this),this._promise=b)};p(V.prototype,{_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);G(this._opt.data,a,null);document.body.appendChild(a);this._form=
a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",e=a.jsonpCallback||"jsonp_"+Z();a.url+=(c.test(a.url)?"&":"?")+b+"="+e;this._jsonpName=e;"undefined"!=typeof window&&(window[e]=m(this.jsonpCallback,this));"undefined"!=typeof global&&(global[e]=m(this.jsonpCallback,this));return e},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):O(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,
b){var c=this._opt;a=U(a,c,b);E.hasListener("processResponse")&&(a=E.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,d;if(this._opt.jsonp)if(a){try{H(a)}catch(e){c.reject(e)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else{try{d=this.processResponseData(a,b)}catch(g){c.reject(g)}c.resolve(d)}},destroy:function(){this._timeout&&
clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();this._form=this._timeout=this._promise=this._deferred=this._opt=this._transport=null;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0,!1);var v=function(a,b){b=b||{};a&&!F(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=t(b.form,"action")),!b.url))throw"Must provide url";
p(b,D,!1,!0);p(b,r,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?t(b.form,"method").toUpperCase()||"GET":"GET";return(new V(b)).promise()};v.setup=function(a){p(D,a,!0,!0)};v.on=function(){E.on.apply(E,arguments)};v.un=function(){E.un.apply(E,arguments)};v.get=function(a,b){b=b||{};b.method="GET";return v(a,b)};v.post=function(a,b){b=b||{};b.method="POST";return v(a,b)};v.load=function(a,b,c){c=c||{};F(b)||(c=b);c.dataType="fragment";return v(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);
a.appendChild(b)})};v.loadScript=function(a){return v(a,{transport:"script"})};v.submit=function(a,b){b=b||{};b.form=a;return v(null,b)};var S=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&J(d,"progress",m(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&J(d.upload,"progress",m(a.uploadProgress,
a.callbackScope));d.onreadystatechange=m(this.onReadyStateChange,this)};p(S.prototype,{_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&k[a.dataType]?k[a.dataType]+", */*; q=0.01":k._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},
onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=R,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=R;var c;a:{try{c=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(F(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=R;this._xhr.abort()},
send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){this._ajax=this._opt=this._deferred=this._xhr=null}},!0,!1);var T=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};p(T.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",
this._opt.url);J(a,"load",m(this.onLoad,this));J(a,"error",m(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);var y=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=
b};p(y.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+Z(),c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);J(a,"load",m(this.onLoad,this));J(a,"error",m(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&
(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);return v}();MetaphorJs.ajax=ja;"undefined"!=typeof global?global.MetaphorJs=MetaphorJs:window.MetaphorJs=MetaphorJs})();
