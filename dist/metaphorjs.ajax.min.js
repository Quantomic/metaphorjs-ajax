(function(){var E={lib:{}},K=Array.prototype.slice,R=function(k){return!(!k||k.constructor!==Object)},v=function(k){return"undefined"==typeof k},M=function a(){var b=!1,c=!1,d=K.call(arguments),e=d.shift(),k,h,q;"boolean"==typeof d[d.length-1]&&(b=d.pop());"boolean"==typeof d[d.length-1]&&(c=b,b=d.pop());for(;d.length;)if(k=d.shift())for(h in k)if(k.hasOwnProperty(h)&&!v(q=k[h]))if(c)if(e[h]&&R(e[h])&&R(q))a(e[h],q,b,c);else{if(!0===b||v(e[h])||null===e[h])R(q)?(e[h]={},a(e[h],q,b,!0)):e[h]=q}else if(!0===
b||v(e[h])||null===e[h])e[h]=q;return e},k=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},m=function(a){return"string"==typeof a},Y=function(){return String.prototype.trim?function(a){return m(a)?a.trim():a}:function(a){return m(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),ba=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},X=function(){},ca=function(){return v(JSON)?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+
a))()}}(),Z=function(a,b){var c,d;if(!a||!m(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},P=function(a){if(!a||v(a.length)||m(a))return a?[a]:[];for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b},$=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,k=/(~|>|\+)/,h=/ +/,q=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
da=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,ea=/\D/,T=/[^(]*\(([^)]*)\)/,A=/\(.*/,U=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,F=document,v=!!F.getElementsByClassName,V=!!F.querySelectorAll,B={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,g){var f=a.nodeIndex||0,n=g[3]=g[3]?("%"===g[2]?-1:1)*g[3]:0,b=g[1];if(f)return!((f+
n)%b);var q=a.parentNode.firstChild;f++;do if(1==q.nodeType&&(q.nodeIndex=++f)&&a===q&&(f+n)%b)return 0;while(q=q.nextSibling);return 1},"nth-last-child":function(a,g){var f=a.nodeIndexLast||0,n=g[3]?("%"===g[2]?-1:1)*g[3]:0,b=g[1];if(f)return!((f+n)%b);var q=a.parentNode.lastChild;f++;do if(1==q.nodeType&&(q.nodeLastIndex=f++)&&a===q&&(f+n)%b)return 0;while(q=q.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=
a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,g){return a.lang!==g&&F.documentElement.lang!==g},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},t={},u=function(a){return t[a]||(t[a]=new RegExp("(^| +)"+a+"($| +)"))},w={"":function(a,g){return!!a.getAttribute(g)},"=":function(a,g,f){return(g=a.getAttribute(g))&&g===f},"&=":function(a,g,f){return(g=a.getAttribute(g))&&
u(f).test(g)},"^=":function(a,g,f){return(g=a.getAttribute(g)+"")&&!g.indexOf(f)},"$=":function(a,g,f){return(g=a.getAttribute(g)+"")&&g.indexOf(f)==g.length-f.length},"*=":function(a,g,f){return(g=a.getAttribute(g)+"")&&-1!=g.indexOf(f)},"|=":function(a,g,f){return(g=a.getAttribute(g)+"")&&(g===f||!!g.indexOf(f+"-"))},"!=":function(a,g,f){return!(g=a.getAttribute(g))||!u(f).test(g)}};return function(t,g){g=g||F;var f=[],n=null,l,z,u,p,m,x,y;if(V)try{f=P(g.querySelectorAll(t.replace(b,'="$1"')))}catch(N){n=
!0}if(!V||n)if(a.test(t))switch(n=0,t.charAt(0)){case "#":n=t.slice(1);f=F.getElementById(n);f.id!==n&&(f=F.all[n]);f=f?[f]:[];break;case ".":l=t.slice(1);if(v)f=P((f=g.getElementsByClassName(l)).length?f:[]);else{l=" "+l+" ";z=g.getElementsByTagName("*");for(u=0;p=z[u++];)-1!=(" "+p.className+" ").indexOf(l)&&(f[n++]=p);f=n?f:[]}break;case ":":z=g.getElementsByTagName("*");u=0;m=t.replace(T,"$1");for(x=t.replace(A,"");p=z[u++];)B[x]&&!B[x](p,m)&&(f[n++]=p);f=n?f:[];break;case "[":z=g.getElementsByTagName("*");
u=0;p=U.exec(t);l=p[1];y=p[2]||"";for(m=p[3];p=z[u++];)w[y]&&(w[y](p,l,m)||"class"===l&&w[y](p,"className",m))&&(f[n++]=p);f=n?f:[];break;default:f=P((f=g.getElementsByTagName(t)).length?f:[])}else{for(var D=t.split(c),C=D.length-1,K=!!C,M,O,s,L,G,H,I,J,E,r,S,W;n=D[C--];){O=(M=n.replace(d,"$1%").replace(e,"$1&").replace(k," $1 ").split(h)).length;u=0;L=" ";for(z=[g];s=M[u++];)if(" "!==s&&">"!==s&&"~"!==s&&"+"!==s&&z){s=s.match(q);G=s[1]||"*";H=s[2];I=s[3]?" "+s[3]+" ":"";l=s[4];y=s[5]||"";x=s[7];
m="nth-child"===x||"nth-last-child"===x?da.exec("even"===s[8]&&"2n"||"odd"===s[8]&&"2n%1"||!ea.test(s[8])&&"0n%"+s[8]||s[8]):s[8];J=[];n=E=0;for(S=u==O;r=z[E++];)switch(L){case " ":W=r.getElementsByTagName(G);for(r=0;p=W[r++];)H&&p.id!==H||I&&-1==(" "+p.className+" ").indexOf(I)||!(!l||w[y]&&(w[y](p,l,s[6])||"class"===l&&w[y](p,"className",s[6])))||p.yeasss||(B[x]?B[x](p,m):x)||(S&&(p.yeasss=1),J[n++]=p);break;case "~":for(G=G.toLowerCase();(r=r.nextSibling)&&!r.yeasss;)1!=r.nodeType||"*"!==G&&r.nodeName.toLowerCase()!==
G||H&&r.id!==H||I&&-1==(" "+r.className+" ").indexOf(I)||!(!l||w[y]&&(w[y](p,l,s[6])||"class"===l&&w[y](p,"className",s[6])))||r.yeasss||(B[x]?B[x](r,m):x)||(S&&(r.yeasss=1),J[n++]=r);break;case "+":for(;(r=r.nextSibling)&&1!=r.nodeType;);!r||r.nodeName.toLowerCase()!==G.toLowerCase()&&"*"!==G||H&&r.id!==H||I&&-1==(" "+p.className+" ").indexOf(I)||!(!l||w[y]&&(w[y](p,l,s[6])||"class"===l&&w[y](p,"className",s[6])))||r.yeasss||(B[x]?B[x](r,m):x)||(S&&(r.yeasss=1),J[n++]=r);break;case ">":for(W=r.getElementsByTagName(G),
u=0;p=W[u++];)p.parentNode!==r||H&&p.id!==H||I&&-1==(" "+p.className+" ").indexOf(I)||!(!l||w[y]&&(w[y](p,l,s[6])||"class"===l&&w[y](p,"className",s[6])))||p.yeasss||(B[x]?B[x](p,m):x)||(S&&(p.yeasss=1),J[n++]=p)}z=J}else L=s;if(K){if(!z.concat){J=[];for(r=0;p=z[r];)J[r++]=p;z=J}f=z.concat(1==f.length?f[0]:f)}else f=z}for(n=f.length;n--;)f[n].yeasss=f[n].nodeIndex=f[n].nodeIndexLast=null}return f}}(),fa=Object.prototype.toString,C=function(a){return null!=a&&"object"===typeof a},aa=function(a){var b;
if(b=a&&C(a))b=a.length,b="number"==typeof b&&!isNaN(b);return!(!b||"[object Array]"!=fa.call(a))},N=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},ga=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),u=function(a){return"function"===typeof a},O=function(){this.events={}};
O.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new Q(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new Q(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,
c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,K.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=
this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,
e=a.length;++d<e;c=a[d],b[c]=k(this[c],this));this.api=b}return this.api}};var Q=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=ga();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=v(b)?null:b};Q.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var k=++this.lid,h=c.first||!1;e[d]=k;a={fn:a,scope:b,
uniScope:e,id:k,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};h?this.listeners.unshift(a):this.listeners.push(a);this.map[k]=a;return k},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,k;k=a==parseInt(a)?a:(b||a)[d];if(!k)return!1;for(var h=0,q=e.length;h<q;h++)if(e[h].id==k){c=h;delete e[h].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[k];return!0},hasListener:function(a,
b){var c=this.listeners,d;if(a){b=b||a;d=u(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,k=c.length;e<k;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=K.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):
c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:K.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};(function(){var a=new O;M(E,a.getApi(),!0,!1)})();E.lib.Observable=
O;var D=function(a){var b;return a&&(C(a)||u(a))?u(b=a.then)?b:!1:!1},L=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var q=a.shift();c(function(){q[0].apply(q[1],q[2]);a.length?d():b=!1},0)},e=function(q,c,h){h=h||[];a.push([q,c,h]);b||d()},m=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},h=function(a,b){if(a instanceof h)return a;if(!(this instanceof h))return new h(a,b);this._fulfills=[];this._rejects=
[];this._dones=[];this._fails=[];if(!v(a))if(D(a)||!u(a))this.resolve(a);else try{a.call(b,k(this.resolve,this),k(this.reject,this))}catch(c){this.reject(c)}};h.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},
_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=D(a)){a instanceof h?a.then(k(this._processResolveValue,this),k(this._processRejectReason,this)):(new h(c,a)).then(k(this._processResolveValue,this),k(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],
[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&
this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new h,d=this._state;0==d||0!=this._wait?(a&&u(a)?this._fulfills.push([m(a,c),null]):this._fulfills.push([c.resolve,c]),b&&u(b)?this._rejects.push([m(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&u(a)?e(m(a,c),null,[this._value]):c.resolve(this._value):2==d&&
(b&&u(b)?e(m(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):
0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:k(this.then,this),done:k(this.done,this),fail:k(this.fail,this),always:k(this.always,this)}},after:function(a){var b=this;if(D(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};u(a.done)?a.done(c):a.then(c)}return b}};h.resolve=function(a){return new h(a)};h.reject=function(a){var b=
new h;b.reject(a);return b};h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=Array(c),e=c,k,m,v=function(a,c){d[c]=a;e--;0==e&&b.resolve(d)};for(k=0;k<c;k++)(function(c){m=a[k];m instanceof h?m.done(function(a){v(a,c)}).fail(b.reject,b):D(m)||u(m)?(new h(m)).done(function(a){v(a,c)}).fail(b.reject,b):v(m,c)})(k);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=[],k=c,e,m,v=function(a){d.push(a);
C()},C=function(){k--;0==k&&b.resolve(d)};for(e=0;e<c;e++)m=a[e],m instanceof h?m.done(v).fail(C):D(m)||u(m)?(new h(m)).done(v).fail(C):v(m);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof h?e.done(b.resolve,b).fail(b.reject,b):D(e)||u(e)?(new h(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};return h}();E.lib.Promise=L;(function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
e=/^(?:GET|HEAD)$/i,D=0,h=function(a,b,c){var l,d;if(m(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a));else if(aa(a)&&c)for(l=0,d=a.length;l<d;l++)h(a[l],b,c+"["+l+"]");else if(C(a))for(l in a)a.hasOwnProperty(l)&&h(a[l],b,c?c+"["+l+"]":l)},q=function(g,f){g.replace(a,"");if(!1===f.cache){var n=(new Date).getTime();return b.test(g)?g.replace(b,"$1_="+n):g+(c.test(g)?"&":"?")+"_="+n}!f.data||window.FormData&&f.data instanceof window.FormData||(m(f.data)?n=f.data:(n=[],h(f.data,n,null),
n=n.join("&").replace(/%20/g,"+")),f.data=n,e.test(f.method)&&(g+=(c.test(g)?"&":"?")+f.data,f.data=null));return g},E={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},K={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,
transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},T={},A=new O,U=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},F=function(a,b,c){var l,d;if(!C(a)&&!u(a)&&c)l=document.createElement("input"),l.setAttribute("type","hidden"),l.setAttribute("name",c),l.setAttribute("value",a),b.appendChild(l);else if(aa(a)&&
c)for(l=0,d=a.length;l<d;l++)F(a[l],b,c+"["+l+"]");else if(C(a))for(l in a)a.hasOwnProperty(l)&&F(a[l],b,c?c+"["+l+"]":l)},R=function(a){for(var b,c,l="",d=0;d<a.elements.length;d++)if(b=a.elements[d],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;l+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)l+="&"+encodeURIComponent(b.name)+
"="+encodeURIComponent(b.value);return l},V=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!m(a))return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=Z(Y(a)),b?$(b,a):a;if("html"===d)return a=Z(a,"text/html"),b?$(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return ca(Y(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&
U(a);return a+""},B=function(a){var b=v(window)?"":window.location.href,b=d.exec(b.toLowerCase())||[],c=d.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")));b=new L;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||!v(window)&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data=
"POST"==a.method?new FormData(a.form):R(a.form));a.url=q(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new Q(a,b,this):new P(a,b,this):new w(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){A.trigger("success",a)});b.fail(function(a){A.trigger("error",a)});b.always(function(){A.trigger("end")});A.trigger("start");a.timeout&&(this._timeout=setTimeout(k(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===A.trigger("beforeSend",a,c)&&(this._promise=
L.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=L.reject());this._promise||(ba(c.send,c),b.abort=k(this.abort,this),b.always(this.destroy,this),this._promise=b)};B.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=
document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);F(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+ ++D;a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;v(window)||(window[d]=k(this.jsonpCallback,this));v(global)||(global[d]=k(this.jsonpCallback,this));return d},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},
processResponseData:function(a,b){var c=this._opt;a=V(a,c,b);A.hasListener("processResponse")&&(a=A.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred;if(this._opt.jsonp)if(a){try{U(a)}catch(d){c.reject(d)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else try{c.resolve(this.processResponseData(a,b))}catch(e){c.reject(e)}},
destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&(v(window)||delete window[this._jsonpName],v(global)||delete global[this._jsonpName])}};var t=function(a,b){b=b||{};a&&!m(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),
!b.url))throw"Must provide url";M(b,T,!1,!0);M(b,K,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new B(b)).promise()};t.setup=function(a){M(T,a,!0,!0)};t.on=function(){A.on.apply(A,arguments)};t.un=function(){A.un.apply(A,arguments)};t.get=function(a,b){b=b||{};b.method="GET";return t(a,b)};t.post=function(a,b){b=b||{};b.method="POST";return t(a,b)};t.load=function(a,b,c){c=c||{};m(b)||(c=b);c.dataType="fragment";return t(b,
c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};t.loadScript=function(a){return t(a,{transport:"script"})};t.submit=function(a,b){b=b||{};b.form=a;return t(null,b)};var P=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&N(d,"progress",k(a.progress,
a.callbackScope));a.uploadProgress&&d.upload&&N(d.upload,"progress",k(a.uploadProgress,a.callbackScope));try{var e;if(a.xhrFields)for(e in a.xhrFields)d[e]=a.xhrFields[e];a.data&&a.contentType&&d.setRequestHeader("Content-Type",a.contentType);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.setRequestHeader("Accept",a.dataType&&E[a.dataType]?E[a.dataType]+", */*; q=0.01":E._default);for(e in a.headers)d.setRequestHeader(e,a.headers[e])}catch(h){}d.onreadystatechange=k(this.onReadyStateChange,
this)};P.prototype={_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=X,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=X;var c;a:{try{c=!a.status&&!v(location)&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(m(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=
X;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var w=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};w.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset",
"utf-8");a.setAttribute("src",this._opt.url);N(a,"load",k(this.onLoad,this));N(a,"error",k(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var Q=
function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};Q.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++D,c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);N(a,"load",k(this.onLoad,this));N(a,"error",k(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=
this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return t})()})();
